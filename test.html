<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>test</title>
<script src="raphael-min.js"></script>
<script>
window.onload = function(){
	var dragger = function () {
		this.ox = this.type == "rect" ? this.attr("x") : this.attr("cx");
		this.oy = this.type == "rect" ? this.attr("y") : this.attr("cy");
		this.mainBody.ox = this.type == "rect" ? this.mainBody.attr("x") : this.mainBody.attr("cx");
		this.mainBody.oy = this.type == "rect" ? this.mainBody.attr("y") : this.mainBody.attr("cy");

		this.animate({"fill-opacity": 1}, 100);
	},
	move = function (dx, dy) {
		var att = this.type == "rect" ? {x: this.ox + dx, y: this.oy + dy} : {cx: this.ox + dx, cy: this.oy + dy};
		this.attr(att);
		att = this.type == "rect" ? {x: this.mainBody.ox + dx, y: this.mainBody.oy + dy} : {cx: this.mainBody.ox + dx, cy: this.mainBody.oy + dy};
		this.mainBody.attr(att);
		
		this.toFront();
		this.mainBody.toFront();
		r.safari();
	},
	up = function () {
		this.animate({"fill-opacity": .2}, 100);
	};
	
	var paper = Raphael(10, 50, 800, 400);
	var anIdea = paper.set();
		
	var ideaBar = paper.rect(40,40,200,20,0).attr("fill-opacity",.2).attr("fill", "#f00").attr("stroke", "#000").attr("stroke-width", 3).drag(move,dragger,up);
	var ideaMain = paper.rect(40,60,200,100,0).attr("fill", "#fff").attr("stroke", "#000").attr("stroke-width", 3);
	ideaBar.mainBody = ideaMain;
	
	anIdea.push( ideaBar, ideaMain );	
};
</script>
</head>
<body>
<div id="canvas">
</div>
</body>
</html>